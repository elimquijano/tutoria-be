"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[977],{5619:function(e,t,n){var i=n(7182),o=n(6491),s=n(8079),l=n(5208),r=n(8060),a=n(3239),c=n(2053),d=n(4857),u=n(3564),x=n(4414);const h=e=>{let{icon:t,onClick:n,isDark:i}=e;const r=(0,d.A)();return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(o.A,{sx:{ml:2,mr:3,[r.breakpoints.down("md")]:{mr:2}},children:(0,x.jsx)(s.A,{children:(0,x.jsx)(l.A,{sx:{...r.typography.commonAvatar,...r.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i?r.palette.secondary.main:r.palette.background.default,color:i?r.palette.background.default:r.palette.secondary.main},onClick:n,color:"inherit",children:t})})})})};t.A=e=>{let{avatarImage:t=null,title:n=null,isDark:s=!0}=e;const p=(0,d.A)(),m=(0,u.Zp)();return(0,x.jsx)(r.A,{enableColorOnDark:!0,color:"inherit",position:"relative",elevation:0,sx:{bgcolor:s?p.palette.secondary.main:p.palette.background.default},children:(0,x.jsxs)(a.A,{children:[(0,x.jsx)(h,{icon:(0,x.jsx)(i.A,{stroke:1.5,size:"1.3rem"}),onClick:()=>{m(-1)},isDark:s}),t&&(0,x.jsx)(l.A,{alt:"",src:t}),n&&(0,x.jsx)(c.A,{variant:"h4",sx:{marginLeft:2,color:s?p.palette.background.default:p.palette.text.primary},children:n}),(0,x.jsx)(o.A,{sx:{flexGrow:1}})]})})}},3068:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var i=n(9950),o=n(4857),s=n(2527),l=n.n(s),r=(n(5392),n(7113)),a=n(3516),c=n(9810),d=n(9029),u=n(6491),x=n(2235),h=n(226),p=n(8145),m=n(2046),g=n(1320),j=n(5769),v=n(4075),f=n(9213),y=n(1671),A=n(5050),b=n(5834),k=n(9715),S=n(9930),C=n(5619),w=n(4889),z=n(7704),_=n(3564),N=n(4414);const D=(0,w.Ht)("USER_SESSION")?w.QU+(0,w.Ht)("USER_SESSION").image:"",I=e=>{let{item:t,permanent:n=!1}=e;const s=(0,o.A)(),[c,d]=(0,i.useState)(n),u=JSON.parse(null===t||void 0===t?void 0:t.location),x=new(l().Icon)({iconUrl:z,iconSize:[35,35],iconAnchor:[17,35],popupAnchor:[0,-35]});return(0,N.jsx)(r.p,{position:[u.latitude,u.longitude],icon:x,eventHandlers:{click:()=>d((e=>!e))},children:c&&(0,N.jsx)(a.m,{direction:"top",offset:[0,-42],opacity:.8,permanent:!0,children:(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,N.jsx)("img",{src:w.QU+(null===t||void 0===t?void 0:t.image)||"",alt:"",style:{width:"80px",height:"80px",margin:"0.4rem"}}),(0,N.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,N.jsxs)("div",{style:{flex:"1 0 auto",padding:"0"},children:[(0,N.jsxs)("h6",{style:{fontWeight:800,margin:0},children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t?void 0:t.lastname]}),(0,N.jsx)("p",{style:{color:"text.secondary"},children:(null===t||void 0===t?void 0:t.address)||""}),(0,N.jsxs)("div",{style:{fontWeight:600},children:[(0,N.jsxs)("div",{style:{color:"text.secondary"},children:[(0,N.jsx)("span",{style:{fontSize:"12px"},children:"@"})," ",(null===t||void 0===t?void 0:t.email)||""]}),(0,N.jsxs)("div",{style:{color:"text.secondary"},children:[(0,N.jsx)("span",{style:{fontSize:"12px"},children:"\u260e"})," ",(null===t||void 0===t?void 0:t.phone)||""]})]}),(0,N.jsx)("div",{children:(0,N.jsx)("button",{style:{backgroundColor:s.palette.secondary.main,color:s.palette.background.paper,border:"none",padding:"0.5rem 1rem",borderRadius:"4px",fontWeight:600},onClick:()=>console.log(t.id),children:"Enviar mensaje"})})]})})]})})})};function E(){const{id:e}=(0,_.g)(),t=(0,o.A)(),[n,s]=(0,i.useState)(null),[z,E]=(0,i.useState)([]),[U,W]=(0,i.useState)([]),[H,O]=(0,i.useState)(!1),[L,P]=(0,i.useState)(""),[R,J]=(0,i.useState)([-9.930648,-76.241496]),[Q,$]=(0,i.useState)(7),[q,F]=(0,i.useState)(Date.now()),G=new(l().Icon)({iconUrl:D,iconSize:[35,35],iconAnchor:[17,35],popupAnchor:[0,-35]});function Z(e){const t=JSON.parse(e.location);J([t.latitude,t.longitude]),$(18),F(Date.now())}const B=()=>{O((e=>!e))},K=(e,t)=>e.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));return(0,i.useEffect)((()=>{fetch(w.E9+"/2").then((e=>e.json())).then((t=>{E(null===t||void 0===t?void 0:t.users),W(null===t||void 0===t?void 0:t.users),0!=e&&Z(null===t||void 0===t?void 0:t.users.find((t=>t.id==e)))})).catch((e=>console.log("Error en obtener especialistas: "+e)))}),[]),(0,N.jsxs)(u.A,{sx:{backgroundColor:t.palette.grey[200],height:"100vh",display:"flex",flexDirection:"column"},children:[(0,N.jsx)(C.A,{title:"Cercanos a tu ubicaci\xf3n",isDark:!1}),(0,N.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,N.jsxs)(x.A,{style:{position:"absolute",zIndex:500},className:"m-2",children:[(0,N.jsx)("div",{className:"text-center",children:(0,N.jsx)(h.A,{fullWidth:!0,onClick:B,children:H?(0,N.jsx)(A.A,{color:"secondary"}):(0,N.jsx)(b.A,{color:"secondary"})})}),H&&(0,N.jsxs)("div",{className:"p-3",children:[(0,N.jsx)(p.A,{id:"form_name",name:"form_name",InputProps:{startAdornment:(0,N.jsx)(m.A,{position:"start",children:(0,N.jsx)(k.A,{})})},value:L,onChange:e=>{const{value:t}=e.target,n=K(z,t);P(t),W(n)},variant:"outlined",size:"small"}),(0,N.jsx)(g.A,{sx:{maxHeight:150},children:(0,N.jsx)(j.A,{stickyHeader:!0,"aria-label":"sticky table",children:(0,N.jsx)(v.A,{children:z.filter((e=>U.some((t=>t.id===e.id)))).map(((e,t)=>{const n=null!==e.location;return(0,N.jsx)(f.A,{hover:!0,role:"checkbox",tabIndex:-1,onClick:n?()=>{B(),Z(e)}:void 0,sx:{cursor:"pointer"},children:(0,N.jsx)(y.A,{align:"left",className:"d-flex justify-content-between align-items-center",children:`${e.firstname} ${e.lastname}`},t)},t)}))})})})]})]}),(0,N.jsx)(x.A,{style:{position:"absolute",right:0,bottom:16,zIndex:500},className:"m-2",children:(0,N.jsx)("div",{className:"text-center",children:(0,N.jsx)(h.A,{fullWidth:!0,onClick:()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;s({latitude:t,longitude:n}),J([t,n]),$(12),F(Date.now())}),(e=>{(0,w.P5)("error","No se pudo obtener la ubicaci\xf3n: "+e.message)})):(0,w.P5)("error","La geolocalizaci\xf3n no es compatible con este navegador.")},children:(0,N.jsx)(S.A,{color:"secondary"})})})}),(0,N.jsxs)(c.W,{style:{width:"100%",height:"100%"},center:R,zoom:Q,zoomControl:!1,children:[(0,N.jsx)(d.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),z.filter((e=>e.location)).map(((t,n)=>{const i=t.id==e;return(0,N.jsx)(I,{item:t,permanent:i},n)})),n&&(0,N.jsx)(r.p,{position:[n.latitude,n.longitude],icon:G,children:(0,N.jsx)(a.m,{permanent:!0,direction:"top",offset:[0,-30],opacity:.6,children:"Est\xe1s Aqu\xed"})})]},q)]})]})}},7704:function(e,t,n){e.exports=n.p+"static/media/hospital.e91f0a4bbc4994b7d5d9.png"}}]);