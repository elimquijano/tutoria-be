"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[100],{3100:function(e,r,t){t.r(r),t.d(r,{default:function(){return k}});var n=t(899),a=t(8145),o=t(249),i=t(8981),l=t(6050),s=t(8614),c=t(5208),d=t(3563),g=t(2053),u=t(8168),v=t(8587),p=t(9950),h=t(533),m=t(1909),f=t(4061);var b=t(632),y=t(4719),O=t(9254),x=t(1676),A=t(863),R=t(8483);function j(e){return(0,R.Ay)("MuiBadge",e)}var S=(0,A.A)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),w=t(4414);const C=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],$=(0,y.h)("MuiBadge"),z=(0,O.Ay)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,r)=>r.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),B=(0,O.Ay)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.badge,r[t.variant],r[`anchorOrigin${(0,x.A)(t.anchorOrigin.vertical)}${(0,x.A)(t.anchorOrigin.horizontal)}${(0,x.A)(t.overlap)}`],"default"!==t.color&&r[`color${(0,x.A)(t.color)}`],t.invisible&&r.invisible]}})((e=>{let{theme:r}=e;var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(t=r.vars)?t:r).palette).filter((e=>{var t,n;return(null!=(t=r.vars)?t:r).palette[e].main&&(null!=(n=r.vars)?n:r).palette[e].contrastText})).map((e=>({props:{color:e},style:{backgroundColor:(r.vars||r).palette[e].main,color:(r.vars||r).palette[e].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:e=>{let{ownerState:r}=e;return"top"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap},style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${S.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:r}=e;return"bottom"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap},style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${S.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:r}=e;return"top"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap},style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${S.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:r}=e;return"bottom"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"rectangular"===r.overlap},style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${S.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:e=>{let{ownerState:r}=e;return"top"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"circular"===r.overlap},style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${S.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:e=>{let{ownerState:r}=e;return"bottom"===r.anchorOrigin.vertical&&"right"===r.anchorOrigin.horizontal&&"circular"===r.overlap},style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${S.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:e=>{let{ownerState:r}=e;return"top"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"circular"===r.overlap},style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${S.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:e=>{let{ownerState:r}=e;return"bottom"===r.anchorOrigin.vertical&&"left"===r.anchorOrigin.horizontal&&"circular"===r.overlap},style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${S.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:r.transitions.create("transform",{easing:r.transitions.easing.easeInOut,duration:r.transitions.duration.leavingScreen})}}]}}));var N=p.forwardRef((function(e,r){var t,n,a,o,i,l;const s=$({props:e,name:"MuiBadge"}),{anchorOrigin:c={vertical:"top",horizontal:"right"},className:d,component:g,components:p={},componentsProps:y={},children:O,overlap:A="rectangular",color:R="default",invisible:S=!1,max:N=99,badgeContent:_,slots:M,slotProps:T,showZero:k=!1,variant:I="standard"}=s,P=(0,v.A)(s,C),{badgeContent:L,invisible:W,max:E,displayValue:Z}=function(e){const{badgeContent:r,invisible:t=!1,max:n=99,showZero:a=!1}=e,o=(0,m.A)({badgeContent:r,max:n});let i=t;!1!==t||0!==r||a||(i=!0);const{badgeContent:l,max:s=n}=i?o:e;return{badgeContent:l,invisible:i,max:s,displayValue:l&&Number(l)>s?`${s}+`:l}}({max:N,invisible:S,badgeContent:_,showZero:k}),H=(0,m.A)({anchorOrigin:c,color:R,overlap:A,variant:I,badgeContent:_}),F=W||null==L&&"dot"!==I,{color:Q=R,overlap:U=A,anchorOrigin:V=c,variant:D=I}=F?H:s,Y="dot"!==D?Z:void 0,q=(0,u.A)({},s,{badgeContent:L,invisible:F,max:E,displayValue:Y,showZero:k,anchorOrigin:V,color:Q,overlap:U,variant:D}),G=(e=>{const{color:r,anchorOrigin:t,invisible:n,overlap:a,variant:o,classes:i={}}=e,l={root:["root"],badge:["badge",o,n&&"invisible",`anchorOrigin${(0,x.A)(t.vertical)}${(0,x.A)(t.horizontal)}`,`anchorOrigin${(0,x.A)(t.vertical)}${(0,x.A)(t.horizontal)}${(0,x.A)(a)}`,`overlap${(0,x.A)(a)}`,"default"!==r&&`color${(0,x.A)(r)}`]};return(0,f.A)(l,j,i)})(q),J=null!=(t=null!=(n=null==M?void 0:M.root)?n:p.Root)?t:z,K=null!=(a=null!=(o=null==M?void 0:M.badge)?o:p.Badge)?a:B,X=null!=(i=null==T?void 0:T.root)?i:y.root,ee=null!=(l=null==T?void 0:T.badge)?l:y.badge,re=(0,b.Q)({elementType:J,externalSlotProps:X,externalForwardedProps:P,additionalProps:{ref:r,as:g},ownerState:q,className:(0,h.A)(null==X?void 0:X.className,G.root,d)}),te=(0,b.Q)({elementType:K,externalSlotProps:ee,ownerState:q,className:(0,h.A)(G.badge,null==ee?void 0:ee.className)});return(0,w.jsxs)(J,(0,u.A)({},re,{children:[O,(0,w.jsx)(K,(0,u.A)({},te,{children:Y}))]}))})),_=t(4745),M=t(4857),T=t(4889);var k=()=>{const[e,r]=(0,p.useState)([]),t=(0,M.A)(),[u,v]=(0,p.useState)(""),[h,m]=(0,p.useState)(e),f=(e,r)=>e.filter((e=>e.name.toLowerCase().includes(r.toLowerCase())));return(0,p.useEffect)((()=>{var e;fetch(T.IO+`conversation?user_id=${null===(e=(0,T.Ht)("USER_SESSION"))||void 0===e?void 0:e.id}`).then((e=>e.json())).then((e=>{const t=e.map((e=>{const r=1===(null===e||void 0===e?void 0:e.tipo_id)?"/#/chat/":"/#/chat-user/",t=null===e||void 0===e?void 0:e.participantes.find((e=>{var r;return e.id!==(null===(r=(0,T.Ht)("USER_SESSION"))||void 0===r?void 0:r.id)}));let n={messageNoRead:0,prevMessage:"",timestamp:"",isRead:!1};var a,o;(null===e||void 0===e?void 0:e.mensaje.length)>0&&(n={messageNoRead:null===e||void 0===e?void 0:e.mensaje.length,prevMessage:null===e||void 0===e||null===(a=e.mensaje[(null===e||void 0===e?void 0:e.mensaje.length)-1])||void 0===a?void 0:a.content,timestamp:null===e||void 0===e||null===(o=e.mensaje[(null===e||void 0===e?void 0:e.mensaje.length)-1])||void 0===o?void 0:o.created_at,isRead:!0});return{conversation_id:null===e||void 0===e?void 0:e.id,name:`${null===t||void 0===t?void 0:t.firstname} ${null===t||void 0===t?void 0:t.lastname}`,image:T.QU+(null===t||void 0===t?void 0:t.image),messageNoRead:n.messageNoRead,previousMessage:n.prevMessage,timestamp:n.timestamp,isRead:n.isRead,urlRedirect:r+(null===e||void 0===e?void 0:e.id)}}));r(t),m(t)})).catch((e=>console.log(e)))}),[]),(0,w.jsxs)(n.Ay,{container:!0,style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)(n.Ay,{item:!0,xs:12,children:(0,w.jsx)(a.A,{label:"Busca un mensaje...",variant:"outlined",fullWidth:!0,onChange:r=>{const t=r.target.value;v(t);const n=f(e,t);m(n)},value:u})}),(0,w.jsx)(n.Ay,{item:!0,xs:12,children:h.length>0?(0,w.jsx)(o.A,{sx:{overflowY:"auto",maxHeight:"72vh"},children:h.map(((e,r)=>(0,w.jsxs)(i.A,{children:[(0,w.jsxs)(l.Ay,{button:!0,onClick:()=>(0,T.T6)(null===e||void 0===e?void 0:e.urlRedirect),style:{padding:16,backgroundColor:e.isRead?t.palette.grey[100]:t.palette.grey[300]},children:[(0,w.jsx)(s.A,{children:(0,w.jsx)(c.A,{src:e.image})}),(0,w.jsx)(d.A,{primary:(0,w.jsxs)(i.A,{direction:"row",justifyContent:"space-between",children:[(0,w.jsx)(g.A,{style:{fontWeight:900},children:e.name}),(0,w.jsx)(N,{badgeContent:e.messageNoRead,color:"secondary",sx:{zIndex:0}})]}),secondary:(0,w.jsxs)(i.A,{direction:"row",justifyContent:"space-between",children:[(0,w.jsx)(g.A,{children:e.previousMessage}),(0,w.jsx)(g.A,{style:{color:t.palette.secondary.main},children:e.timestamp})]})})]}),(0,w.jsx)(_.A,{})]},r)))}):(0,w.jsx)(g.A,{align:"center",style:{padding:12},children:"No hay mensajes disponibles."})})]})}},1909:function(e,r,t){var n=t(9950);r.A=e=>{const r=n.useRef({});return n.useEffect((()=>{r.current=e})),r.current}}}]);