"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[780],{5619:function(e,t,r){var n=r(7182),a=r(6491),o=r(8079),l=r(5208),i=r(8060),s=r(3239),c=r(2053),d=r(4857),u=r(3564),f=r(4414);const x=e=>{let{icon:t,onClick:r,isDark:n}=e;const i=(0,d.A)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(a.A,{sx:{ml:2,mr:3,[i.breakpoints.down("md")]:{mr:2}},children:(0,f.jsx)(o.A,{children:(0,f.jsx)(l.A,{sx:{...i.typography.commonAvatar,...i.typography.mediumAvatar,transition:"all .2s ease-in-out",background:n?i.palette.secondary.main:i.palette.background.default,color:n?i.palette.background.default:i.palette.secondary.main},onClick:r,color:"inherit",children:t})})})})};t.A=e=>{let{avatarImage:t=null,title:r=null,isDark:o=!0}=e;const h=(0,d.A)(),p=(0,u.Zp)();return(0,f.jsx)(i.A,{enableColorOnDark:!0,color:"inherit",position:"relative",elevation:0,sx:{bgcolor:o?h.palette.secondary.main:h.palette.background.default},children:(0,f.jsxs)(s.A,{children:[(0,f.jsx)(x,{icon:(0,f.jsx)(n.A,{stroke:1.5,size:"1.3rem"}),onClick:()=>{p(-1)},isDark:o}),t&&(0,f.jsx)(l.A,{alt:"",src:t}),r&&(0,f.jsx)(c.A,{variant:"h4",sx:{marginLeft:2,color:o?h.palette.background.default:h.palette.text.primary},children:r}),(0,f.jsx)(a.A,{sx:{flexGrow:1}})]})})}},4780:function(e,t,r){r.r(t);var n=r(9950),a=r(6491),o=r(249),l=r(6050),i=r(2235),s=r(2053),c=r(8145),d=r(2046),u=r(5333),f=r(1673),x=r(4857),h=r(4889),p=r(5619),m=r(3564),A=r(4414);t.default=()=>{const{id:e}=(0,m.g)(),t=(0,h.Ht)("USER_SESSION"),[r,v]=(0,n.useState)({}),g=(0,x.A)(),j=(0,n.useRef)(null),[k,y]=(0,n.useState)([]),[b,C]=(0,n.useState)(""),[_,S]=(0,n.useState)(!1),w=async()=>{if(""!==b.trim()){S(!0);try{const r={conversation_id:e,user_id:t.id,content:b},n={role:"user",content:(await(0,h.LS)(h.XS,r)).content};y((e=>[...e,n])),C("")}catch(r){console.log(r)}finally{S(!1)}}};return(0,n.useEffect)((()=>{fetch(h.hk+`/${e}`).then((e=>e.json())).then((e=>{const r=null===e||void 0===e?void 0:e.participantes.find((e=>e.id!==(null===t||void 0===t?void 0:t.id)));v(r),y((null===e||void 0===e?void 0:e.mensajes).map((e=>({role:e.user_id==t.id?"user":"assistant",content:e.content}))))})).catch((e=>console.log(e)))}),[]),(0,n.useEffect)((()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)}),[k]),(0,A.jsxs)(a.A,{sx:{backgroundColor:g.palette.grey[200],height:"100vh",display:"flex",flexDirection:"column"},children:[(0,A.jsx)(p.A,{avatarImage:h.QU+(null===r||void 0===r?void 0:r.image)||"",title:`${(null===r||void 0===r?void 0:r.firstname)||""} ${(null===r||void 0===r?void 0:r.lastname)||""}`,isDark:!1}),(0,A.jsx)(o.A,{ref:j,sx:{width:"100%",flexGrow:1,overflowY:"auto",padding:2},children:k.map(((e,t)=>(0,A.jsx)(l.Ay,{sx:{justifyContent:"user"===e.role?"flex-end":"flex-start",alignItems:"flex-start",marginBottom:1},children:(0,A.jsx)(i.A,{elevation:1,sx:{padding:2,maxWidth:"70%",backgroundColor:"user"===e.role?g.palette.secondary.main:"#fff",borderTopLeftRadius:"assistant"===e.role?"0":"auto",borderTopRightRadius:"user"===e.role?"0":"auto"},children:(0,A.jsx)(s.A,{style:{color:"user"===e.role?"#fff":"#000"},children:e.content})})},t)))}),(0,A.jsx)(a.A,{sx:{padding:2,backgroundColor:"#fff"},children:(0,A.jsx)(c.A,{placeholder:"Escribe un mensaje...",multiline:!0,maxRows:4,value:b,onChange:e=>C(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w())},fullWidth:!0,variant:"outlined",InputProps:{endAdornment:(0,A.jsx)(d.A,{position:"end",children:(0,A.jsx)(u.A,{color:"secondary",onClick:w,disabled:_,children:(0,A.jsx)(f.A,{})})})}})})]})}},7182:function(e,t,r){var n=r(5471),a=r(4414);t.A=(0,n.A)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},1673:function(e,t,r){var n=r(5471),a=r(4414);t.A=(0,n.A)((0,a.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send")}}]);