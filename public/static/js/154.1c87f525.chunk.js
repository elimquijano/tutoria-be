"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[154],{5619:function(e,t,n){var i=n(7182),o=n(6491),s=n(8079),l=n(5208),r=n(8060),a=n(3239),c=n(2053),d=n(4857),u=n(3564),h=n(4414);const x=e=>{let{icon:t,onClick:n,isDark:i}=e;const r=(0,d.A)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(o.A,{sx:{ml:2,mr:3,[r.breakpoints.down("md")]:{mr:2}},children:(0,h.jsx)(s.A,{children:(0,h.jsx)(l.A,{sx:{...r.typography.commonAvatar,...r.typography.mediumAvatar,transition:"all .2s ease-in-out",background:i?r.palette.secondary.main:r.palette.background.default,color:i?r.palette.background.default:r.palette.secondary.main},onClick:n,color:"inherit",children:t})})})})};t.A=e=>{let{avatarImage:t=null,title:n=null,isDark:s=!0}=e;const m=(0,d.A)(),p=(0,u.Zp)();return(0,h.jsx)(r.A,{enableColorOnDark:!0,color:"inherit",position:"relative",elevation:0,sx:{bgcolor:s?m.palette.secondary.main:m.palette.background.default},children:(0,h.jsxs)(a.A,{children:[(0,h.jsx)(x,{icon:(0,h.jsx)(i.A,{stroke:1.5,size:"1.3rem"}),onClick:()=>{p(-1)},isDark:s}),t&&(0,h.jsx)(l.A,{alt:"",src:t}),n&&(0,h.jsx)(c.A,{variant:"h4",sx:{marginLeft:2,color:s?m.palette.background.default:m.palette.text.primary},children:n}),(0,h.jsx)(o.A,{sx:{flexGrow:1}})]})})}},1237:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(9950),o=n(4857),s=n(2527),l=n.n(s),r=(n(5392),n(7113)),a=n(3516),c=n(9810),d=n(9029),u=n(6491),h=n(2235),x=n(226),m=n(8145),p=n(2046),g=n(1320),j=n(5769),v=n(4075),f=n(9213),y=n(1671),A=n(5050),b=n(5834),k=n(9715),S=n(9930),w=n(5619),C=n(4889),N=n(7704),_=n(3564);const z=(0,n(9344).F3)("Geolocation",{web:()=>n.e(73).then(n.bind(n,2073)).then((e=>new e.GeolocationWeb))});var D=n(4414);const E=(0,C.Ht)("USER_SESSION")?C.QU+(0,C.Ht)("USER_SESSION").image:"",I=e=>{let{item:t,permanent:n=!1}=e;const s=(0,o.A)(),[c,d]=(0,i.useState)(n),u=JSON.parse(null===t||void 0===t?void 0:t.location),h=new(l().Icon)({iconUrl:N,iconSize:[35,35],iconAnchor:[17,35],popupAnchor:[0,-35]});return(0,D.jsx)(r.p,{position:[u.latitude,u.longitude],icon:h,eventHandlers:{click:()=>d((e=>!e))},children:c&&(0,D.jsx)(a.m,{direction:"top",offset:[0,-42],opacity:.8,permanent:!0,children:(0,D.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,D.jsx)("img",{src:C.QU+(null===t||void 0===t?void 0:t.image)||"",alt:"",style:{width:"80px",height:"80px",margin:"0.4rem"}}),(0,D.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,D.jsxs)("div",{style:{flex:"1 0 auto",padding:"0"},children:[(0,D.jsxs)("h6",{style:{fontWeight:800,margin:0},children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t?void 0:t.lastname]}),(0,D.jsx)("p",{style:{color:"text.secondary"},children:(null===t||void 0===t?void 0:t.address)||""}),(0,D.jsxs)("div",{style:{fontWeight:600},children:[(0,D.jsxs)("div",{style:{color:"text.secondary"},children:[(0,D.jsx)("span",{style:{fontSize:"12px"},children:"@"})," ",(null===t||void 0===t?void 0:t.email)||""]}),(0,D.jsxs)("div",{style:{color:"text.secondary"},children:[(0,D.jsx)("span",{style:{fontSize:"12px"},children:"\u260e"})," ",(null===t||void 0===t?void 0:t.phone)||""]})]}),(0,D.jsx)("div",{children:(0,D.jsx)("button",{style:{backgroundColor:s.palette.secondary.main,color:s.palette.background.paper,border:"none",padding:"0.5rem 1rem",borderRadius:"4px",fontWeight:600},onClick:()=>console.log(t.id),children:"Enviar mensaje"})})]})})]})})})};function P(){const{id:e}=(0,_.g)(),t=(0,o.A)(),[n,s]=(0,i.useState)(null),[N,P]=(0,i.useState)([]),[W,H]=(0,i.useState)([]),[U,G]=(0,i.useState)(!1),[O,$]=(0,i.useState)(""),[L,R]=(0,i.useState)([-9.930648,-76.241496]),[F,J]=(0,i.useState)(7),[Q,q]=(0,i.useState)(Date.now()),[Z,B]=(0,i.useState)(null),K=new(l().Icon)({iconUrl:E,iconSize:[35,35],iconAnchor:[17,35],popupAnchor:[0,-35]});function M(e){const t=JSON.parse(e.location);R([t.latitude,t.longitude]),J(18),q(Date.now())}const T=()=>{G((e=>!e))},V=(e,t)=>e.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));return(0,i.useEffect)((()=>(fetch(C.E9+"/2").then((e=>e.json())).then((t=>{P(null===t||void 0===t?void 0:t.users),H(null===t||void 0===t?void 0:t.users),0!=e&&M(null===t||void 0===t?void 0:t.users.find((t=>t.id==e)))})).catch((e=>console.log("Error en obtener especialistas: "+e))),()=>{Z&&z.clearWatch({id:Z})})),[]),(0,D.jsxs)(u.A,{sx:{backgroundColor:t.palette.grey[200],height:"100vh",display:"flex",flexDirection:"column"},children:[(0,D.jsx)(w.A,{title:"Cercanos a tu ubicaci\xf3n",isDark:!1}),(0,D.jsxs)("div",{style:{position:"relative",height:"100%",width:"100%"},children:[(0,D.jsxs)(h.A,{style:{position:"absolute",zIndex:500},className:"m-2",children:[(0,D.jsx)("div",{className:"text-center",children:(0,D.jsx)(x.A,{fullWidth:!0,onClick:T,children:U?(0,D.jsx)(A.A,{color:"secondary"}):(0,D.jsx)(b.A,{color:"secondary"})})}),U&&(0,D.jsxs)("div",{className:"p-3",children:[(0,D.jsx)(m.A,{id:"form_name",name:"form_name",InputProps:{startAdornment:(0,D.jsx)(p.A,{position:"start",children:(0,D.jsx)(k.A,{})})},value:O,onChange:e=>{const{value:t}=e.target,n=V(N,t);$(t),H(n)},variant:"outlined",size:"small"}),(0,D.jsx)(g.A,{sx:{maxHeight:150},children:(0,D.jsx)(j.A,{stickyHeader:!0,"aria-label":"sticky table",children:(0,D.jsx)(v.A,{children:N.filter((e=>W.some((t=>t.id===e.id)))).map(((e,t)=>{const n=null!==e.location;return(0,D.jsx)(f.A,{hover:!0,role:"checkbox",tabIndex:-1,onClick:n?()=>{T(),M(e)}:void 0,sx:{cursor:"pointer"},children:(0,D.jsx)(y.A,{align:"left",className:"d-flex justify-content-between align-items-center",children:`${e.firstname} ${e.lastname}`},t)},t)}))})})})]})]}),(0,D.jsx)(h.A,{style:{position:"absolute",right:0,bottom:16,zIndex:500},className:"m-2",children:(0,D.jsx)("div",{className:"text-center",children:(0,D.jsx)(x.A,{fullWidth:!0,onClick:async()=>{try{const e=await z.getCurrentPosition(),{latitude:t,longitude:n}=e.coords;s({latitude:t,longitude:n}),R([t,n]),J(12),q(Date.now()),(async()=>{try{const e={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},t=await z.watchPosition(e,((e,t)=>{if(t)return void(0,C.P5)("error",`No se pudo obtener la ubicaci\xf3n: ${"location disabled"==t.message?"Activa tu GPS":t.message}`);const{latitude:n,longitude:i}=e.coords;s({latitude:n,longitude:i})}));B(t)}catch(e){(0,C.P5)("error",`Error al iniciar el seguimiento de la ubicaci\xf3n: ${e.message}`)}})()}catch(e){(0,C.P5)("error",`No se pudo obtener la ubicaci\xf3n: ${"location disabled"==e.message?"Activa tu GPS":e.message}`)}},children:(0,D.jsx)(S.A,{color:"secondary"})})})}),(0,D.jsxs)(c.W,{style:{width:"100%",height:"100%"},center:L,zoom:F,zoomControl:!1,children:[(0,D.jsx)(d.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),N.filter((e=>e.location)).map(((t,n)=>{const i=t.id==e;return(0,D.jsx)(I,{item:t,permanent:i},n)})),n&&(0,D.jsx)(r.p,{position:[n.latitude,n.longitude],icon:K,children:(0,D.jsx)(a.m,{permanent:!0,direction:"top",offset:[0,-30],opacity:.6,children:"Est\xe1s Aqu\xed"})})]},Q)]})]})}},7704:function(e,t,n){e.exports=n.p+"static/media/hospital.e91f0a4bbc4994b7d5d9.png"}}]);