"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[773],{5619:function(e,a,t){var n=t(7182),s=t(6491),r=t(8079),i=t(5208),l=t(8060),o=t(3239),d=t(2053),c=t(4857),m=t(3564),p=t(4414);const h=e=>{let{icon:a,onClick:t,isDark:n}=e;const l=(0,c.A)();return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.A,{sx:{ml:2,mr:3,[l.breakpoints.down("md")]:{mr:2}},children:(0,p.jsx)(r.A,{children:(0,p.jsx)(i.A,{sx:{...l.typography.commonAvatar,...l.typography.mediumAvatar,transition:"all .2s ease-in-out",background:n?l.palette.secondary.main:l.palette.background.default,color:n?l.palette.background.default:l.palette.secondary.main},onClick:t,color:"inherit",children:a})})})})};a.A=e=>{let{avatarImage:a=null,title:t=null,isDark:r=!0}=e;const u=(0,c.A)(),x=(0,m.Zp)();return(0,p.jsx)(l.A,{enableColorOnDark:!0,color:"inherit",position:"relative",elevation:0,sx:{bgcolor:r?u.palette.secondary.main:u.palette.background.default},children:(0,p.jsxs)(o.A,{children:[(0,p.jsx)(h,{icon:(0,p.jsx)(n.A,{stroke:1.5,size:"1.3rem"}),onClick:()=>{x(-1)},isDark:r}),a&&(0,p.jsx)(i.A,{alt:"",src:a}),t&&(0,p.jsx)(d.A,{variant:"h4",sx:{marginLeft:2,color:r?u.palette.background.default:u.palette.text.primary},children:t}),(0,p.jsx)(s.A,{sx:{flexGrow:1}})]})})}},5773:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});var n=t(9950),s=t(6491),r=t(5208),i=t(2053),l=t(2235),o=t(8145),d=t(226),c=t(4921),m=t(5333),p=t(899),h=t(5979),u=t(3788),x=t(3523),g=t(8587),v=t(8168),A=t(533),b=t(4061),f=t(9269),j=t(9254),y=t(9608),C=t(664),w=t(3372),k=t(8079),I=t(9044),M=t(1506),O=t(777),$=t(2455),H=t(8543),_=t(863),z=t(8483);function P(e){return(0,z.Ay)("MuiMenuItem",e)}var S=(0,_.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),W=t(4414);const V=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],L=(0,j.Ay)(k.A,{shouldForwardProp:e=>(0,y.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.dense&&a.dense,t.divider&&a.divider,!t.disableGutters&&a.gutters]}})((e=>{let{theme:a,ownerState:t}=e;return(0,v.A)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${S.selected}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:(0,f.X4)(a.palette.primary.main,a.palette.action.selectedOpacity),[`&.${S.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:(0,f.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},[`&.${S.selected}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:(0,f.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:(0,f.X4)(a.palette.primary.main,a.palette.action.selectedOpacity)}},[`&.${S.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${S.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},[`& + .${O.A.root}`]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},[`& + .${O.A.inset}`]:{marginLeft:52},[`& .${H.A.root}`]:{marginTop:0,marginBottom:0},[`& .${H.A.inset}`]:{paddingLeft:36},[`& .${$.A.root}`]:{minWidth:36}},!t.dense&&{[a.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,v.A)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,{[`& .${$.A.root} svg`]:{fontSize:"1.25rem"}}))}));var N=n.forwardRef((function(e,a){const t=(0,C.A)({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:r="li",dense:i=!1,divider:l=!1,disableGutters:o=!1,focusVisibleClassName:d,role:c="menuitem",tabIndex:m,className:p}=t,h=(0,g.A)(t,V),u=n.useContext(w.A),x=n.useMemo((()=>({dense:i||u.dense||!1,disableGutters:o})),[u.dense,i,o]),f=n.useRef(null);(0,I.A)((()=>{s&&f.current&&f.current.focus()}),[s]);const j=(0,v.A)({},t,{dense:x.dense,divider:l,disableGutters:o}),y=(e=>{const{disabled:a,dense:t,divider:n,disableGutters:s,selected:r,classes:i}=e,l={root:["root",t&&"dense",a&&"disabled",!s&&"gutters",n&&"divider",r&&"selected"]},o=(0,b.A)(l,P,i);return(0,v.A)({},i,o)})(t),k=(0,M.A)(f,a);let O;return t.disabled||(O=void 0!==m?m:-1),(0,W.jsx)(w.A.Provider,{value:x,children:(0,W.jsx)(L,(0,v.A)({ref:k,role:c,tabIndex:O,component:r,focusVisibleClassName:(0,A.A)(y.focusVisible,d),className:(0,A.A)(y.root,p)},h,{ownerState:j,classes:y}))})})),R=t(4857),D=t(5471),G=(0,D.A)((0,W.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),B=(0,D.A)((0,W.jsx)("path",{d:"M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PersonOutline"),F=(0,D.A)((0,W.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),T=(0,D.A)((0,W.jsx)("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),E=(0,D.A)((0,W.jsx)("path",{d:"M5.5 22v-7.5H4V9c0-1.1.9-2 2-2h3c1.1 0 2 .9 2 2v5.5H9.5V22zM18 22v-6h3l-2.54-7.63C18.18 7.55 17.42 7 16.56 7h-.12c-.86 0-1.63.55-1.9 1.37L12 16h3v6zM7.5 6c1.11 0 2-.89 2-2s-.89-2-2-2-2 .89-2 2 .89 2 2 2m9 0c1.11 0 2-.89 2-2s-.89-2-2-2-2 .89-2 2 .89 2 2 2"}),"Wc"),X=(0,D.A)((0,W.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),U=(0,D.A)((0,W.jsx)("path",{d:"M2 17h20v2H2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48H7v-1.5H5.3l.85-1.47L4.85 7 4 8.47 3.15 7l-1.3.75.85 1.47H1v1.5h1.7l-.85 1.48zm6.7-.75 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H15v-1.5h-1.7l.85-1.47-1.3-.75L12 8.47 11.15 7l-1.3.75.85 1.47H9v1.5h1.7zM23 9.22h-1.7l.85-1.47-1.3-.75L20 8.47 19.15 7l-1.3.75.85 1.47H17v1.5h1.7l-.85 1.48 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H23z"}),"Password"),Y=(0,D.A)((0,W.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),J=t(4889),Q=t(5619);var Z=function(){const e=(0,R.A)(),[a,t]=(0,n.useState)(null),[g,v]=(0,n.useState)(!1),[A,b]=(0,n.useState)(!1),[f,j]=(0,n.useState)({}),[y,C]=(0,n.useState)({});(0,n.useEffect)((()=>{w()}),[]);const w=()=>{t((0,J.Ht)("USER_SESSION"))},k=e=>{const{name:a,value:t}=e.target;C({...y,[a]:t})},I=()=>{v(!0)},M=()=>{v(!1)},O=()=>{b(!1)},$=e=>{const{name:a,value:t,files:n}=e.target;j("image"===a?e=>({...e,[a]:n[0]}):e=>({...e,[a]:t}))};return(0,W.jsxs)(s.A,{sx:{backgroundColor:e.palette.grey[200],height:"100vh",display:"flex",flexDirection:"column"},children:[(0,W.jsx)(Q.A,{isDark:!1}),a&&(0,W.jsx)(s.A,{sx:{flexGrow:1},children:(0,W.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",overflowY:"auto"},children:[(0,W.jsxs)(s.A,{sx:{alignItems:"center",padding:2,width:"100%",backgroundColor:e.palette.secondary.main},children:[(0,W.jsx)(r.A,{src:J.QU+a.image||"",sx:{width:100,height:100,margin:"0 auto",backgroundColor:e.palette.secondary.main}}),(0,W.jsxs)(i.A,{variant:"h3",sx:{fontWeight:"bold",textAlign:"center",marginTop:1,color:e.palette.background.default},children:[null===a||void 0===a?void 0:a.firstname," ",null===a||void 0===a?void 0:a.lastname]})]}),(0,W.jsxs)(l.A,{sx:{margin:2,padding:2},children:[(0,W.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",marginBottom:2},children:[(0,W.jsx)(G,{sx:{color:"secondary.main",marginRight:1}}),(0,W.jsx)(o.A,{label:"Nombre",value:a.firstname||"",variant:"standard",InputProps:{readOnly:!0},fullWidth:!0})]}),(0,W.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",marginBottom:2},children:[(0,W.jsx)(B,{sx:{color:"secondary.main",marginRight:1}}),(0,W.jsx)(o.A,{label:"Apellidos",value:`${(null===a||void 0===a?void 0:a.lastname)||""}`,variant:"standard",InputProps:{readOnly:!0},fullWidth:!0})]}),(0,W.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",marginBottom:2},children:[(0,W.jsx)(F,{sx:{color:"secondary.main",marginRight:1}}),(0,W.jsx)(o.A,{label:"Email",value:a.email,variant:"standard",InputProps:{readOnly:!0},fullWidth:!0})]}),(0,W.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",marginBottom:2},children:[(0,W.jsx)(T,{sx:{color:"secondary.main",marginRight:1}}),(0,W.jsx)(o.A,{label:"Fecha de Nacimiento",value:a.birthdate||"",variant:"standard",InputProps:{readOnly:!0},fullWidth:!0})]}),(0,W.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",marginBottom:2},children:[(0,W.jsx)(E,{sx:{color:"secondary.main",marginRight:1}}),(0,W.jsx)(o.A,{label:"G\xe9nero",value:(null===a||void 0===a?void 0:a.gender)||"",variant:"standard",InputProps:{readOnly:!0},fullWidth:!0})]}),(0,W.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",paddingY:3,gap:2},children:[(0,W.jsx)(d.A,{color:"secondary",variant:"outlined",onClick:()=>{j({firstname:a.firstname,lastname:a.lastname,email:a.email,phone:a.phone,birthdate:a.birthdate,gender:a.gender}),I()},startIcon:(0,W.jsx)(X,{}),children:"Editar Datos"}),(0,W.jsx)(d.A,{color:"secondary",variant:"outlined",onClick:()=>{b(!0)},startIcon:(0,W.jsx)(U,{}),children:"Cambiar Contrase\xf1a"})]})]})]})}),!a&&(0,W.jsx)(i.A,{align:"center",children:"Cargando datos del usuario..."}),(0,W.jsx)(c.A,{open:g,onClose:M,"aria-labelledby":"edit-modal-title",children:(0,W.jsxs)(s.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",borderRadius:1,boxShadow:24,p:4,width:"90%",maxWidth:600},children:[(0,W.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,W.jsx)(i.A,{variant:"h5",children:"Editar mis datos"}),(0,W.jsx)(m.A,{onClick:M,children:(0,W.jsx)(Y,{})})]}),(0,W.jsxs)(p.Ay,{container:!0,spacing:2,children:[(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsx)(o.A,{label:"Nombres",name:"firstname",value:f.firstname||"",onChange:$,fullWidth:!0})}),(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsx)(o.A,{label:"Apellidos",name:"lastname",value:f.lastname||"",onChange:$,fullWidth:!0})}),(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsx)(o.A,{label:"Fecha de Nacimiento",name:"birthdate",type:"date",InputLabelProps:{shrink:!0},value:f.birthdate||"",onChange:$,fullWidth:!0})}),(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsx)(o.A,{label:"Correo Electr\xf3nico",name:"email",value:f.email||"",onChange:$,fullWidth:!0})}),(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsx)(o.A,{label:"Tel\xe9fono",name:"phone",value:f.phone||"",onChange:$,fullWidth:!0})}),(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,children:[(0,W.jsx)(u.A,{id:"gender-label",children:"G\xe9nero"}),(0,W.jsxs)(x.A,{labelId:"gender-label",name:"gender",value:f.gender||"",onChange:$,label:"G\xe9nero",children:[(0,W.jsx)(N,{value:"Masculino",children:"Masculino"}),(0,W.jsx)(N,{value:"Femenino",children:"Femenino"}),(0,W.jsx)(N,{value:"Otro",children:"Otro"})]})]})}),(0,W.jsx)(p.Ay,{item:!0,xs:12,sm:6,children:(0,W.jsx)(o.A,{label:"Perfil",name:"image",type:"file",InputLabelProps:{shrink:!0},inputProps:{accept:"image/*"},onChange:$,fullWidth:!0})})]}),(0,W.jsx)(s.A,{display:"flex",justifyContent:"center",mt:4,children:(0,W.jsx)(d.A,{variant:"contained",color:"primary",onClick:async function(){const e=a.id;try{const a=new FormData;a.append("firstname",f.firstname),a.append("lastname",f.lastname),a.append("email",f.email),a.append("phone",f.phone),a.append("birthdate",f.birthdate),a.append("gender",f.gender),a.append("id",e),null!==f&&void 0!==f&&f.image&&a.append("image",f.image);const t={method:"POST",body:a},n=await fetch(J.$F+"update/"+e,t),s=await n.json();(0,J.P5)("success",s.message),M(),(0,J.T6)("/#/config")}catch(t){(0,J.P5)("error","No se pudo actualizar.")}},startIcon:(0,W.jsx)(X,{}),children:"Actualizar"})})]})}),(0,W.jsx)(c.A,{open:A,onClose:O,"aria-labelledby":"pass-modal-title",children:(0,W.jsxs)(s.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",borderRadius:1,boxShadow:24,p:4,width:"90%",maxWidth:600},children:[(0,W.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,W.jsx)(i.A,{variant:"h5",children:"Cambiar Contrase\xf1a"}),(0,W.jsx)(m.A,{onClick:O,children:(0,W.jsx)(Y,{})})]}),(0,W.jsxs)(s.A,{component:"form",children:[(0,W.jsx)(o.A,{label:"Contrase\xf1a Actual",name:"current_password",type:"password",onChange:k,fullWidth:!0,margin:"normal"}),(0,W.jsx)(o.A,{label:"Nueva Contrase\xf1a",name:"new_password",type:"password",onChange:k,fullWidth:!0,margin:"normal"}),(0,W.jsx)(o.A,{label:"Confirmar Nueva Contrase\xf1a",name:"new_password_confirmation",type:"password",onChange:k,fullWidth:!0,margin:"normal"})]}),(0,W.jsx)(s.A,{display:"flex",justifyContent:"center",mt:4,children:(0,W.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>{const e=a.id;fetch(J.$F+"/"+e+"/change-password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:y.current_password,new_password:y.new_password,new_password_confirmation:y.new_password_confirmation})}).then((e=>e.json())).then((e=>{(0,J.P5)("success",e.message),O()})).catch((e=>{(0,J.P5)("error",e)}))},startIcon:(0,W.jsx)(X,{}),children:"Confirmar"})})]})})]})}},7182:function(e,a,t){var n=t(5471),s=t(4414);a.A=(0,n.A)((0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);