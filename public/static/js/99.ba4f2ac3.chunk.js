"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[99],{5619:function(e,t,n){var a=n(7182),i=n(6491),o=n(8079),r=n(5208),s=n(8060),l=n(3239),c=n(2053),d=n(4857),u=n(3564),h=n(4414);const x=e=>{let{icon:t,onClick:n,isDark:a}=e;const s=(0,d.A)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(i.A,{sx:{ml:2,mr:3,[s.breakpoints.down("md")]:{mr:2}},children:(0,h.jsx)(o.A,{children:(0,h.jsx)(r.A,{sx:{...s.typography.commonAvatar,...s.typography.mediumAvatar,transition:"all .2s ease-in-out",background:a?s.palette.secondary.main:s.palette.background.default,color:a?s.palette.background.default:s.palette.secondary.main},onClick:n,color:"inherit",children:t})})})})};t.A=e=>{let{avatarImage:t=null,title:n=null,isDark:o=!0}=e;const p=(0,d.A)(),f=(0,u.Zp)();return(0,h.jsx)(s.A,{enableColorOnDark:!0,color:"inherit",position:"relative",elevation:0,sx:{bgcolor:o?p.palette.secondary.main:p.palette.background.default},children:(0,h.jsxs)(l.A,{children:[(0,h.jsx)(x,{icon:(0,h.jsx)(a.A,{stroke:1.5,size:"1.3rem"}),onClick:()=>{f(-1)},isDark:o}),t&&(0,h.jsx)(r.A,{alt:"",src:t}),n&&(0,h.jsx)(c.A,{variant:"h4",sx:{marginLeft:2,color:o?p.palette.background.default:p.palette.text.primary},children:n}),(0,h.jsx)(i.A,{sx:{flexGrow:1}})]})})}},4355:function(e,t,n){n(9950);var a=n(6491),i=n(4414);t.A=e=>{let{isActive:t,backgroundColor:n="#000",color:o="#fff"}=e;return(0,i.jsx)(a.A,{sx:{width:300,height:300,borderRadius:"50%",backgroundColor:n,position:"relative",overflow:"hidden"},children:t&&(0,i.jsx)(a.A,{sx:{position:"absolute",bottom:0,width:"100%",height:"100%",display:"flex",alignItems:"flex-end",justifyContent:"center",gap:"4px",padding:"0 10px"},children:[...Array(20)].map(((e,t)=>(0,i.jsx)(a.A,{sx:{width:"4%",height:"20%",backgroundColor:o,animation:"spectro 1.5s infinite",animationDelay:.1*t+"s"}},t)))})})}},8099:function(e,t,n){n.r(t);var a=n(9950),i=n(6491),o=n(2053),r=n(5333),s=n(6676),l=n(7835),c=n(5619),d=n(4355),u=n(4889),h=n(4857),x=n(3564),p=n(4414);t.default=()=>{const{id:e}=(0,x.g)(),t=(0,u.Ht)("USER_SESSION"),[n,f]=(0,a.useState)({}),v=(0,h.A)(),[m,A]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),[y,k]=(0,a.useState)(!1),[b,S]=(0,a.useState)(!1),[w,C]=(0,a.useState)(null);(0,a.useEffect)((()=>{fetch(u.hk+`/${e}`).then((e=>e.json())).then((e=>{const n=null===e||void 0===e?void 0:e.participantes.find((e=>e.id!==(null===t||void 0===t?void 0:t.id)));f(n)})).catch((e=>console.log(e)))}),[]),(0,a.useEffect)((()=>{(0,u.KO)(`Hola ${null===t||void 0===t?void 0:t.firstname}, soy tu asistente de rehabilitaci\xf3n. \xbfEn qu\xe9 puedo ayudarte hoy?`,k)}),[]),(0,a.useEffect)((()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return void(0,u.P5)("error","La API de reconocimiento de voz no es compatible con este navegador.");const t=new e;return t.continuous=!0,t.interimResults=!0,t.lang="es-ES",t.onresult=e=>{const t=Array.from(e.results).map((e=>e[0].transcript)).join("");j(t)},t.onend=()=>{m&&t.start()},C(t),()=>{t.stop()}}),[]);return(0,p.jsxs)(i.A,{sx:{backgroundColor:v.palette.grey[200],height:"100vh",display:"flex",flexDirection:"column"},children:[(0,p.jsx)(c.A,{avatarImage:u.QU+(null===n||void 0===n?void 0:n.image)||"",title:`${null===n||void 0===n?void 0:n.firstname} ${null===n||void 0===n?void 0:n.lastname}`,isDark:!1}),(0,p.jsxs)(i.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,p.jsx)(d.A,{isActive:m||y,backgroundColor:v.palette.grey[200],color:v.palette.secondary.main}),(0,p.jsx)(o.A,{variant:"h6",sx:{mt:2,color:v.palette.secondary.main},children:m?"Escuchando...":b?"Generando respuesta...":y?"Hablando...":"Presiona el bot\xf3n para hablar"}),(0,p.jsx)(o.A,{variant:"",sx:{mt:2},children:g})]}),(0,p.jsx)(i.A,{sx:{padding:1,display:"flex",justifyContent:"center"},children:(0,p.jsx)(r.A,{color:"secondary",onClick:async()=>{if(m){if(w.stop(),A((e=>!e)),""!==g.trim()){S(!0);const a={conversation_id:e,user_id:t.id,content:g},i=await(0,u.LS)(u.XS,a),o=await(0,u.UP)(i.content),r={conversation_id:e,user_id:n.id,content:o},s=await(0,u.LS)(u.XS,r);S(!1),(0,u.KO)(s.content,k)}}else w.start(),A((e=>!e))},sx:{width:60,height:60},disabled:y,children:m?(0,p.jsx)(l.A,{sx:{fontSize:40}}):(0,p.jsx)(s.A,{sx:{fontSize:40}})})})]})}},6676:function(e,t,n){var a=n(4994);t.A=void 0;var i=a(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3m5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72z"}),"Mic")},7835:function(e,t,n){var a=n(4994);t.A=void 0;var i=a(n(9526)),o=n(4414);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop")},7182:function(e,t,n){var a=n(5471),i=n(4414);t.A=(0,a.A)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")}}]);